{"ast":null,"code":"var url = require('url');\nvar util = require('util');\nvar _ = require('lodash');\nvar S = require('string');\nvar debug = require('debug')('yahoo-finance:utils');\nvar request = require('request-promise');\nvar moment = require('moment-timezone');\nvar tough = require('tough-cookie');\nvar Cookie = tough.Cookie;\nvar dateFormats = ['YYYY-MM-DD', 'MM/DD/YYYY'];\nvar cookiejar = new request.jar();\nfunction camelize(text) {\n  return S(text).slugify().camelize().s;\n}\nfunction augmentHttpRequestOptions(optionalOptions) {\n  if (optionalOptions && optionalOptions.jar) throw new Error(\"node-yahoo-finance does not support 'jar' key in \" + \"optionalHttpRequestOptions, since we need to use our own cookiejar.\");\n  return _.assign({}, optionalOptions, {\n    resolveWithFullResponse: true,\n    jar: cookiejar\n  });\n}\nfunction storeCookiesInJar(setCookieHeader, url, cookiejar) {\n  var cookies;\n  if (typeof setCookieHeader === 'undefined') {\n    // no-op\n  } else if (setCookieHeader instanceof Array) {\n    cookies = setCookieHeader.map(Cookie.parse);\n  } else if (typeof setCookieHeader === 'string') {\n    cookies = [Cookie.parse(setCookieHeader)];\n  }\n  if (cookies) for (var i = 0; i < cookies.length; i++) {\n    // note: async, possible timing issues? TODO\n    cookiejar.setCookie('' + cookies[i], url);\n  }\n}\nfunction download(uri, qs, optionalHttpRequestOptions) {\n  var finalHttpRequestOptions = augmentHttpRequestOptions(optionalHttpRequestOptions);\n  debug(url.format({\n    pathname: uri,\n    query: qs\n  }));\n  return request(_.extend({\n    uri: uri,\n    qs: qs\n  }, finalHttpRequestOptions)).then(function (res) {\n    storeCookiesInJar(res.headers['set-cookie'], uri, cookiejar);\n    return optionalHttpRequestOptions && optionalHttpRequestOptions.resolveWithFullResponse ? res : res.body;\n  });\n}\nfunction parseCSV(text) {\n  return S(text).trim().s.split('\\n').map(function (line) {\n    return S(line).trim().parseCSV();\n  });\n}\nfunction toDate(value, valueForError) {\n  try {\n    var date = moment.tz(value, dateFormats, 'America/New_York').toDate();\n    if (date.getFullYear() < 1400) {\n      return null;\n    }\n    return date;\n  } catch (err) {\n    if (_.isUndefined(valueForError)) {\n      return null;\n    } else {\n      return valueForError;\n    }\n  }\n}\nfunction toFloat(value, valueForNaN) {\n  var result = parseFloat(value);\n  if (isNaN(result)) {\n    if (_.isUndefined(valueForNaN)) {\n      return null;\n    } else {\n      return valueForNaN;\n    }\n  } else {\n    return result;\n  }\n}\nfunction toInt(value, valueForNaN) {\n  var result = parseInt(value, 10);\n  if (isNaN(result)) {\n    if (_.isUndefined(valueForNaN)) {\n      return null;\n    } else {\n      return valueForNaN;\n    }\n  } else {\n    return result;\n  }\n}\nexports.cookiejar = cookiejar;\nexports.camelize = camelize;\nexports.download = download;\nexports.parseCSV = parseCSV;\nexports.toDate = toDate;\nexports.toFloat = toFloat;\nexports.toInt = toInt;","map":{"version":3,"names":["url","require","util","_","S","debug","request","moment","tough","Cookie","dateFormats","cookiejar","jar","camelize","text","slugify","s","augmentHttpRequestOptions","optionalOptions","Error","assign","resolveWithFullResponse","storeCookiesInJar","setCookieHeader","cookies","Array","map","parse","i","length","setCookie","download","uri","qs","optionalHttpRequestOptions","finalHttpRequestOptions","format","pathname","query","extend","then","res","headers","body","parseCSV","trim","split","line","toDate","value","valueForError","date","tz","getFullYear","err","isUndefined","toFloat","valueForNaN","result","parseFloat","isNaN","toInt","parseInt","exports"],"sources":["/Users/lordvoldemort/IdeaProjects/Webdevelopment/Bulls and Bears/bull_bear/node_modules/yahoo-finance/lib/utils.js"],"sourcesContent":["var url = require('url');\nvar util = require('util');\n\nvar _ = require('lodash');\nvar S = require('string');\nvar debug = require('debug')('yahoo-finance:utils');\nvar request = require('request-promise');\nvar moment = require('moment-timezone');\nvar tough = require('tough-cookie');\n\nvar Cookie = tough.Cookie;\nvar dateFormats = ['YYYY-MM-DD', 'MM/DD/YYYY'];\nvar cookiejar = new request.jar();\n\nfunction camelize(text) {\n  return S(text)\n    .slugify()\n    .camelize()\n    .s;\n}\n\nfunction augmentHttpRequestOptions(optionalOptions) {\n  if (optionalOptions && optionalOptions.jar)\n    throw new Error(\"node-yahoo-finance does not support 'jar' key in \" +\n      \"optionalHttpRequestOptions, since we need to use our own cookiejar.\");\n\n  return _.assign({}, optionalOptions, {\n    resolveWithFullResponse: true,\n    jar: cookiejar\n  });\n}\n\nfunction storeCookiesInJar(setCookieHeader, url, cookiejar) {\n  var cookies;\n\n  if (typeof setCookieHeader === 'undefined') {\n    // no-op\n  } else if (setCookieHeader instanceof Array) {\n    cookies = setCookieHeader.map(Cookie.parse);\n  } else if (typeof setCookieHeader === 'string') {\n    cookies = [ Cookie.parse(setCookieHeader) ];\n  }\n\n  if (cookies)\n  for (var i=0; i < cookies.length; i++) {\n    // note: async, possible timing issues? TODO\n    cookiejar.setCookie(''+cookies[i], url);\n  }\n}\n\nfunction download(uri, qs, optionalHttpRequestOptions) {\n  var finalHttpRequestOptions = augmentHttpRequestOptions(optionalHttpRequestOptions);\n\n  debug(url.format({pathname: uri, query: qs}));\n  return request(_.extend({uri: uri, qs: qs}, finalHttpRequestOptions))\n    .then(function(res) {\n      storeCookiesInJar(res.headers['set-cookie'], uri, cookiejar);\n      return (optionalHttpRequestOptions &&\n        optionalHttpRequestOptions.resolveWithFullResponse) ? res : res.body;\n    });\n}\n\nfunction parseCSV(text) {\n  return S(text).trim().s.split('\\n').map(function (line) {\n    return S(line).trim().parseCSV();\n  });\n}\n\nfunction toDate(value, valueForError) {\n  try {\n    var date = moment.tz(value, dateFormats, 'America/New_York').toDate();\n    if (date.getFullYear() < 1400) { return null; }\n    return date;\n  } catch (err) {\n    if (_.isUndefined(valueForError)) {\n      return null;\n    } else {\n      return valueForError;\n    }\n  }\n}\n\nfunction toFloat(value, valueForNaN) {\n  var result = parseFloat(value);\n  if (isNaN(result)) {\n    if (_.isUndefined(valueForNaN)) {\n      return null;\n    } else {\n      return valueForNaN;\n    }\n  } else  {\n    return result;\n  }\n}\n\nfunction toInt(value, valueForNaN) {\n  var result = parseInt(value, 10);\n  if (isNaN(result)) {\n    if (_.isUndefined(valueForNaN)) {\n      return null;\n    } else {\n      return valueForNaN;\n    }\n  } else  {\n    return result;\n  }\n}\n\nexports.cookiejar = cookiejar;\nexports.camelize = camelize;\nexports.download = download;\nexports.parseCSV = parseCSV;\nexports.toDate = toDate;\nexports.toFloat = toFloat;\nexports.toInt = toInt;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}