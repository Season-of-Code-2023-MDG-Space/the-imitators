{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\nvar attributes = require('./attributes');\nvar helpers = require('./helpers');\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n  handleArrayContainerDefaults(layoutIn, layoutOut, {\n    name: 'shapes',\n    handleItemDefaults: handleShapeDefaults\n  });\n};\nfunction dfltLabelYanchor(isLine, labelTextPosition) {\n  // If shape is a line, default y-anchor is 'bottom' (so that text is above line by default)\n  // Otherwise, default y-anchor is equal to y-component of `textposition`\n  // (so that text is positioned inside shape bounding box by default)\n  return isLine ? 'bottom' : labelTextPosition.indexOf('top') !== -1 ? 'top' : labelTextPosition.indexOf('bottom') !== -1 ? 'bottom' : 'middle';\n}\nfunction handleShapeDefaults(shapeIn, shapeOut, fullLayout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(shapeIn, shapeOut, attributes, attr, dflt);\n  }\n  var visible = coerce('visible');\n  if (!visible) return;\n  var path = coerce('path');\n  var dfltType = path ? 'path' : 'rect';\n  var shapeType = coerce('type', dfltType);\n  var noPath = shapeType !== 'path';\n  if (noPath) delete shapeOut.path;\n  coerce('editable');\n  coerce('layer');\n  coerce('opacity');\n  coerce('fillcolor');\n  coerce('fillrule');\n  var lineWidth = coerce('line.width');\n  if (lineWidth) {\n    coerce('line.color');\n    coerce('line.dash');\n  }\n  var xSizeMode = coerce('xsizemode');\n  var ySizeMode = coerce('ysizemode');\n\n  // positioning\n  var axLetters = ['x', 'y'];\n  for (var i = 0; i < 2; i++) {\n    var axLetter = axLetters[i];\n    var attrAnchor = axLetter + 'anchor';\n    var sizeMode = axLetter === 'x' ? xSizeMode : ySizeMode;\n    var gdMock = {\n      _fullLayout: fullLayout\n    };\n    var ax;\n    var pos2r;\n    var r2pos;\n\n    // xref, yref\n    var axRef = Axes.coerceRef(shapeIn, shapeOut, gdMock, axLetter, undefined, 'paper');\n    var axRefType = Axes.getRefType(axRef);\n    if (axRefType === 'range') {\n      ax = Axes.getFromId(gdMock, axRef);\n      ax._shapeIndices.push(shapeOut._index);\n      r2pos = helpers.rangeToShapePosition(ax);\n      pos2r = helpers.shapePositionToRange(ax);\n    } else {\n      pos2r = r2pos = Lib.identity;\n    }\n\n    // Coerce x0, x1, y0, y1\n    if (noPath) {\n      var dflt0 = 0.25;\n      var dflt1 = 0.75;\n\n      // hack until V3.0 when log has regular range behavior - make it look like other\n      // ranges to send to coerce, then put it back after\n      // this is all to give reasonable default position behavior on log axes, which is\n      // a pretty unimportant edge case so we could just ignore this.\n      var attr0 = axLetter + '0';\n      var attr1 = axLetter + '1';\n      var in0 = shapeIn[attr0];\n      var in1 = shapeIn[attr1];\n      shapeIn[attr0] = pos2r(shapeIn[attr0], true);\n      shapeIn[attr1] = pos2r(shapeIn[attr1], true);\n      if (sizeMode === 'pixel') {\n        coerce(attr0, 0);\n        coerce(attr1, 10);\n      } else {\n        Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attr0, dflt0);\n        Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attr1, dflt1);\n      }\n\n      // hack part 2\n      shapeOut[attr0] = r2pos(shapeOut[attr0]);\n      shapeOut[attr1] = r2pos(shapeOut[attr1]);\n      shapeIn[attr0] = in0;\n      shapeIn[attr1] = in1;\n    }\n\n    // Coerce xanchor and yanchor\n    if (sizeMode === 'pixel') {\n      // Hack for log axis described above\n      var inAnchor = shapeIn[attrAnchor];\n      shapeIn[attrAnchor] = pos2r(shapeIn[attrAnchor], true);\n      Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attrAnchor, 0.25);\n\n      // Hack part 2\n      shapeOut[attrAnchor] = r2pos(shapeOut[attrAnchor]);\n      shapeIn[attrAnchor] = inAnchor;\n    }\n  }\n  if (noPath) {\n    Lib.noneOrAll(shapeIn, shapeOut, ['x0', 'x1', 'y0', 'y1']);\n  }\n\n  // Label options\n  var isLine = shapeType === 'line';\n  var labelText = coerce('label.text');\n  if (labelText) {\n    coerce('label.textangle');\n    var labelTextPosition = coerce('label.textposition', isLine ? 'middle' : 'middle center');\n    coerce('label.xanchor');\n    coerce('label.yanchor', dfltLabelYanchor(isLine, labelTextPosition));\n    coerce('label.padding');\n    Lib.coerceFont(coerce, 'label.font', fullLayout.font);\n  }\n}","map":{"version":3,"names":["Lib","require","Axes","handleArrayContainerDefaults","attributes","helpers","module","exports","supplyLayoutDefaults","layoutIn","layoutOut","name","handleItemDefaults","handleShapeDefaults","dfltLabelYanchor","isLine","labelTextPosition","indexOf","shapeIn","shapeOut","fullLayout","coerce","attr","dflt","visible","path","dfltType","shapeType","noPath","lineWidth","xSizeMode","ySizeMode","axLetters","i","axLetter","attrAnchor","sizeMode","gdMock","_fullLayout","ax","pos2r","r2pos","axRef","coerceRef","undefined","axRefType","getRefType","getFromId","_shapeIndices","push","_index","rangeToShapePosition","shapePositionToRange","identity","dflt0","dflt1","attr0","attr1","in0","in1","coercePosition","inAnchor","noneOrAll","labelText","coerceFont","font"],"sources":["/Users/lordvoldemort/django_react/second_attempt/frontend/bull_bear/node_modules/plotly.js/src/components/shapes/defaults.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nvar attributes = require('./attributes');\nvar helpers = require('./helpers');\n\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n    handleArrayContainerDefaults(layoutIn, layoutOut, {\n        name: 'shapes',\n        handleItemDefaults: handleShapeDefaults\n    });\n};\n\nfunction dfltLabelYanchor(isLine, labelTextPosition) {\n    // If shape is a line, default y-anchor is 'bottom' (so that text is above line by default)\n    // Otherwise, default y-anchor is equal to y-component of `textposition`\n    // (so that text is positioned inside shape bounding box by default)\n    return isLine ? 'bottom' :\n        labelTextPosition.indexOf('top') !== -1 ? 'top' :\n        labelTextPosition.indexOf('bottom') !== -1 ? 'bottom' : 'middle';\n}\n\nfunction handleShapeDefaults(shapeIn, shapeOut, fullLayout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(shapeIn, shapeOut, attributes, attr, dflt);\n    }\n\n    var visible = coerce('visible');\n    if(!visible) return;\n\n    var path = coerce('path');\n    var dfltType = path ? 'path' : 'rect';\n    var shapeType = coerce('type', dfltType);\n    var noPath = shapeType !== 'path';\n    if(noPath) delete shapeOut.path;\n\n    coerce('editable');\n    coerce('layer');\n    coerce('opacity');\n    coerce('fillcolor');\n    coerce('fillrule');\n    var lineWidth = coerce('line.width');\n    if(lineWidth) {\n        coerce('line.color');\n        coerce('line.dash');\n    }\n\n    var xSizeMode = coerce('xsizemode');\n    var ySizeMode = coerce('ysizemode');\n\n    // positioning\n    var axLetters = ['x', 'y'];\n    for(var i = 0; i < 2; i++) {\n        var axLetter = axLetters[i];\n        var attrAnchor = axLetter + 'anchor';\n        var sizeMode = axLetter === 'x' ? xSizeMode : ySizeMode;\n        var gdMock = {_fullLayout: fullLayout};\n        var ax;\n        var pos2r;\n        var r2pos;\n\n        // xref, yref\n        var axRef = Axes.coerceRef(shapeIn, shapeOut, gdMock, axLetter, undefined,\n            'paper');\n        var axRefType = Axes.getRefType(axRef);\n\n        if(axRefType === 'range') {\n            ax = Axes.getFromId(gdMock, axRef);\n            ax._shapeIndices.push(shapeOut._index);\n            r2pos = helpers.rangeToShapePosition(ax);\n            pos2r = helpers.shapePositionToRange(ax);\n        } else {\n            pos2r = r2pos = Lib.identity;\n        }\n\n        // Coerce x0, x1, y0, y1\n        if(noPath) {\n            var dflt0 = 0.25;\n            var dflt1 = 0.75;\n\n            // hack until V3.0 when log has regular range behavior - make it look like other\n            // ranges to send to coerce, then put it back after\n            // this is all to give reasonable default position behavior on log axes, which is\n            // a pretty unimportant edge case so we could just ignore this.\n            var attr0 = axLetter + '0';\n            var attr1 = axLetter + '1';\n            var in0 = shapeIn[attr0];\n            var in1 = shapeIn[attr1];\n            shapeIn[attr0] = pos2r(shapeIn[attr0], true);\n            shapeIn[attr1] = pos2r(shapeIn[attr1], true);\n\n            if(sizeMode === 'pixel') {\n                coerce(attr0, 0);\n                coerce(attr1, 10);\n            } else {\n                Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attr0, dflt0);\n                Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attr1, dflt1);\n            }\n\n            // hack part 2\n            shapeOut[attr0] = r2pos(shapeOut[attr0]);\n            shapeOut[attr1] = r2pos(shapeOut[attr1]);\n            shapeIn[attr0] = in0;\n            shapeIn[attr1] = in1;\n        }\n\n        // Coerce xanchor and yanchor\n        if(sizeMode === 'pixel') {\n            // Hack for log axis described above\n            var inAnchor = shapeIn[attrAnchor];\n            shapeIn[attrAnchor] = pos2r(shapeIn[attrAnchor], true);\n\n            Axes.coercePosition(shapeOut, gdMock, coerce, axRef, attrAnchor, 0.25);\n\n            // Hack part 2\n            shapeOut[attrAnchor] = r2pos(shapeOut[attrAnchor]);\n            shapeIn[attrAnchor] = inAnchor;\n        }\n    }\n\n    if(noPath) {\n        Lib.noneOrAll(shapeIn, shapeOut, ['x0', 'x1', 'y0', 'y1']);\n    }\n\n    // Label options\n    var isLine = shapeType === 'line';\n    var labelText = coerce('label.text');\n    if(labelText) {\n        coerce('label.textangle');\n        var labelTextPosition = coerce('label.textposition', isLine ? 'middle' : 'middle center');\n        coerce('label.xanchor');\n        coerce('label.yanchor', dfltLabelYanchor(isLine, labelTextPosition));\n        coerce('label.padding');\n        Lib.coerceFont(coerce, 'label.font', fullLayout.font);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}