{"ast":null,"code":"var os = require('os');\nvar util = require('util');\nvar _ = require('lodash');\nvar S = require('string');\nvar moment = require('moment');\nvar Promise = require('bluebird');\nvar _constants = require('./constants');\nvar _utils = require('./utils');\nvar getCrumb = require('./yahooCrumb').getCrumb;\nfunction _sanitizeHistoricalOptions(options) {\n  if (!_.isPlainObject(options)) {\n    throw new Error('\"options\" must be a plain object.');\n  }\n  if (_.isUndefined(options.symbol) && _.isUndefined(options.symbols)) {\n    throw new Error('Either \"options.symbol\" or \"options.symbols\" must be defined.');\n  }\n  if (!_.isUndefined(options.symbol) && !_.isUndefined(options.symbols)) {\n    throw new Error('Either \"options.symbol\" or \"options.symbols\" must be undefined.');\n  }\n  if (!_.isUndefined(options.error) && !_.isBoolean(options.error)) {\n    throw new Error('\"options.error\" must be a boolean value');\n  }\n  if (!_.isUndefined(options.symbol)) {\n    if (!_.isString(options.symbol) || _.isEmpty(options.symbol)) {\n      throw new Error('\"options.symbol\" must be a non-empty string.');\n    }\n  } else {\n    if (!_.isArray(options.symbols) || _.isEmpty(options.symbols)) {\n      throw new Error('\"options.symbols\" must be a non-empty string array.');\n    }\n  }\n  if (_.isString(options.from) && !_.isEmpty(options.from)) {\n    options.from = moment(options.from);\n    if (!options.from.isValid()) {\n      throw new Error('\"options.from\" must be a valid date string.');\n    }\n  } else {\n    if (!_.isDate(options.from) && !_.isUndefined(options.from) && !_.isNull(options.from)) {\n      throw new Error('\"options.from\" must be a date or undefined/null.');\n    }\n    if (_.isDate(options.from)) {\n      options.from = moment(options.from);\n    }\n  }\n  if (_.isString(options.to) && !_.isEmpty(options.to)) {\n    options.to = moment(options.to);\n    if (!options.to.isValid()) {\n      throw new Error('\"options.to\" must be a valid date string.');\n    }\n  } else {\n    if (!_.isDate(options.to) && !_.isUndefined(options.to) && !_.isNull(options.to)) {\n      throw new Error('\"options.to\" must be a date or undefined/null.');\n    }\n    if (_.isDate(options.to)) {\n      options.to = moment(options.to);\n    }\n  }\n  if (_.isString(options.period)) {\n    if (!_.includes(['d', 'w', 'm', 'v'], options.period)) {\n      throw new Error('\"options.period\" must be \"d\", \"w\", \"m\", or \"v\".');\n    }\n  } else {\n    if (!_.isUndefined(options.period) && !_.isNull(options.period)) {\n      throw new Error('\"options.period\" must be a string or undefined/null.');\n    }\n  }\n  if (!options.from) {\n    options.from = moment('1900-01-01');\n  }\n  if (!options.to) {\n    options.to = moment({\n      hour: 0\n    });\n  }\n  if (!options.period) {\n    options.period = '1d';\n  }\n  options.events = 'history';\n\n  // Convert to yahoo v7 API\n  switch (options.period) {\n    case 'd':\n      options.period = '1d';\n      break;\n    case 'w':\n      options.period = '1wk';\n      break;\n    case 'm':\n      options.period = '1mo';\n      break;\n    case 'v':\n      options.period = '1d';\n      options.events = 'div';\n      break;\n    // No default case needed, options are sanitized above.\n  }\n\n  if ((options.from || options.to) && options.from.isAfter(options.to)) {\n    throw new Error('\"options.to\" must be be greater than or equal to \"options.from\".');\n  }\n}\nfunction _transformHistorical(symbol, data) {\n  var headings = data.shift();\n  return _(data).reverse().map(function (line) {\n    var result = {};\n    headings.forEach(function (heading, i) {\n      var value = line[i];\n      if (_.includes(['Volume'], heading)) {\n        value = _utils.toInt(value, null);\n      } else if (_.includes(['Open', 'High', 'Low', 'Close', 'Adj Close', 'Dividends'], heading)) {\n        value = _utils.toFloat(value, null);\n      } else if (_.includes(['Date'], heading)) {\n        value = _utils.toDate(value, null);\n        if (value && !moment(value).isValid()) {\n          value = null;\n        }\n      }\n      result[_utils.camelize(heading)] = value;\n    });\n    result.symbol = symbol;\n    return result;\n  }).value();\n}\nfunction historical(options, optionalHttpRequestOptions, cb) {\n  options = _.clone(options);\n  _sanitizeHistoricalOptions(options);\n  var symbols = options.symbols || _.flatten([options.symbol]);\n  if (optionalHttpRequestOptions && typeof optionalHttpRequestOptions === 'function') {\n    cb = optionalHttpRequestOptions;\n    optionalHttpRequestOptions = undefined;\n  }\n  return getCrumb(symbols[0]).then(function (crumb) {\n    return Promise.map(symbols, function (symbol) {\n      var url = _constants.HISTORICAL_DOWNLOAD_URL.replace(/\\$SYMBOL/, symbol);\n      return _utils.download(url, {\n        period1: options.from.format('X'),\n        period2: options.to.format('X'),\n        interval: options.period,\n        events: options.events,\n        crumb: crumb\n      }, optionalHttpRequestOptions).then(_utils.parseCSV).then(function (data) {\n        return _transformHistorical(symbol, data);\n      }).catch(function (err) {\n        if (options.error) {\n          throw err;\n        } else {\n          return [];\n        }\n      });\n    }, {\n      concurrency: options.maxConcurrentSymbols || os.cpus().length\n    }).then(function (result) {\n      if (options.symbols) {\n        return _.zipObject(symbols, result);\n      } else {\n        return result[0];\n      }\n    }).catch(function (err) {\n      throw new Error(util.format('Failed to download data (%s)', err.message));\n    }).nodeify(cb);\n  });\n}\nmodule.exports = historical;","map":{"version":3,"names":["os","require","util","_","S","moment","Promise","_constants","_utils","getCrumb","_sanitizeHistoricalOptions","options","isPlainObject","Error","isUndefined","symbol","symbols","error","isBoolean","isString","isEmpty","isArray","from","isValid","isDate","isNull","to","period","includes","hour","events","isAfter","_transformHistorical","data","headings","shift","reverse","map","line","result","forEach","heading","i","value","toInt","toFloat","toDate","camelize","historical","optionalHttpRequestOptions","cb","clone","flatten","undefined","then","crumb","url","HISTORICAL_DOWNLOAD_URL","replace","download","period1","format","period2","interval","parseCSV","catch","err","concurrency","maxConcurrentSymbols","cpus","length","zipObject","message","nodeify","module","exports"],"sources":["/Users/lordvoldemort/IdeaProjects/Webdevelopment/Bulls and Bears/bull_bear/node_modules/yahoo-finance/lib/historical.js"],"sourcesContent":["var os = require('os');\nvar util = require('util');\n\nvar _ = require('lodash');\nvar S = require('string');\nvar moment = require('moment');\nvar Promise = require('bluebird');\n\nvar _constants = require('./constants');\nvar _utils = require('./utils');\nvar getCrumb = require('./yahooCrumb').getCrumb;\n\nfunction _sanitizeHistoricalOptions(options) {\n  if (!_.isPlainObject(options)) {\n    throw new Error('\"options\" must be a plain object.');\n  }\n  if (_.isUndefined(options.symbol) && _.isUndefined(options.symbols)) {\n    throw new Error('Either \"options.symbol\" or \"options.symbols\" must be defined.');\n  }\n  if (!_.isUndefined(options.symbol) && !_.isUndefined(options.symbols)) {\n    throw new Error('Either \"options.symbol\" or \"options.symbols\" must be undefined.');\n  }\n  if (!_.isUndefined(options.error) && !_.isBoolean(options.error)) {\n    throw new Error('\"options.error\" must be a boolean value');\n  }\n  if (!_.isUndefined(options.symbol)) {\n    if (!_.isString(options.symbol) || _.isEmpty(options.symbol)) {\n      throw new Error('\"options.symbol\" must be a non-empty string.');\n    }\n  } else {\n    if (!_.isArray(options.symbols) || _.isEmpty(options.symbols)) {\n      throw new Error('\"options.symbols\" must be a non-empty string array.');\n    }\n  }\n\n  if (_.isString(options.from) && !_.isEmpty(options.from)) {\n    options.from = moment(options.from);\n    if (!options.from.isValid()) {\n      throw new Error('\"options.from\" must be a valid date string.');\n    }\n  } else {\n    if (!_.isDate(options.from) && !_.isUndefined(options.from) && !_.isNull(options.from)) {\n      throw new Error('\"options.from\" must be a date or undefined/null.');\n    }\n    if (_.isDate(options.from)) {\n      options.from = moment(options.from);\n    }\n  }\n\n  if (_.isString(options.to) && !_.isEmpty(options.to)) {\n    options.to = moment(options.to);\n    if (!options.to.isValid()) {\n      throw new Error('\"options.to\" must be a valid date string.');\n    }\n  } else {\n    if (!_.isDate(options.to) && !_.isUndefined(options.to) && !_.isNull(options.to)) {\n      throw new Error('\"options.to\" must be a date or undefined/null.');\n    }\n    if (_.isDate(options.to)) {\n      options.to = moment(options.to);\n    }\n  }\n\n  if (_.isString(options.period)) {\n    if (!_.includes(['d', 'w', 'm', 'v'], options.period)) {\n      throw new Error('\"options.period\" must be \"d\", \"w\", \"m\", or \"v\".');\n    }\n  } else {\n    if (!_.isUndefined(options.period) && !_.isNull(options.period)) {\n      throw new Error('\"options.period\" must be a string or undefined/null.');\n    }\n  }\n\n  if (!options.from) {\n    options.from = moment('1900-01-01');\n  }\n\n  if (!options.to) {\n    options.to = moment({ hour: 0 });\n  }\n\n  if (!options.period) {\n    options.period = '1d';\n  }\n\n  options.events = 'history';\n\n  // Convert to yahoo v7 API\n  switch (options.period) {\n    case 'd': options.period = '1d'; break;\n    case 'w': options.period = '1wk'; break;\n    case 'm': options.period = '1mo'; break;\n    case 'v': options.period = '1d'; options.events = 'div'; break;\n    // No default case needed, options are sanitized above.\n  }\n\n  if ((options.from || options.to) && options.from.isAfter(options.to)) {\n    throw new Error('\"options.to\" must be be greater than or equal to \"options.from\".');\n  }\n}\n\nfunction _transformHistorical(symbol, data) {\n  var headings = data.shift();\n  return _(data)\n    .reverse()\n    .map(function (line) {\n      var result = {};\n      headings.forEach(function (heading, i) {\n        var value = line[i];\n        if (_.includes(['Volume'], heading)) {\n          value = _utils.toInt(value, null);\n        } else if (_.includes(['Open', 'High', 'Low', 'Close', 'Adj Close', 'Dividends'], heading)) {\n          value = _utils.toFloat(value, null);\n        } else if (_.includes(['Date'], heading)) {\n          value = _utils.toDate(value, null);\n          if (value && !moment(value).isValid()) {\n            value = null;\n          }\n        }\n        result[_utils.camelize(heading)] = value;\n      });\n      result.symbol = symbol;\n      return result;\n    })\n    .value();\n}\n\nfunction historical(options, optionalHttpRequestOptions, cb) {\n  options = _.clone(options);\n  _sanitizeHistoricalOptions(options);\n  var symbols = options.symbols || _.flatten([options.symbol]);\n\n  if(optionalHttpRequestOptions && typeof optionalHttpRequestOptions === 'function') {\n    cb = optionalHttpRequestOptions;\n    optionalHttpRequestOptions = undefined;\n  }\n\n  return getCrumb(symbols[0])\n    .then(function(crumb) {\n      return Promise.map(symbols, function (symbol) {\n        var url = _constants.HISTORICAL_DOWNLOAD_URL.replace(/\\$SYMBOL/, symbol);\n        return _utils.download(url, {\n          period1: options.from.format('X'),\n          period2: options.to.format('X'),\n          interval: options.period,\n          events: options.events,\n          crumb: crumb\n        }, optionalHttpRequestOptions)\n        .then(_utils.parseCSV)\n        .then(function (data) {\n          return _transformHistorical(symbol, data);\n        })\n        .catch(function (err) {\n          if (options.error) {\n            throw err;\n          } else {\n            return [];\n          }\n        });\n      }, {concurrency: options.maxConcurrentSymbols || os.cpus().length})\n      .then(function (result) {\n        if (options.symbols) {\n          return _.zipObject(symbols, result);\n        } else {\n          return result[0];\n        }\n      })\n      .catch(function (err) {\n        throw new Error(util.format('Failed to download data (%s)', err.message));\n      })\n      .nodeify(cb);\n    });\n}\n\nmodule.exports = historical;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}